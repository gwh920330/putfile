<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="flexible" content="initial-dpr=2"/>
    <title>Currency</title>
    <link href="Currency2.css" type="text/css" rel="stylesheet">
    <script src="flexible_css.debug.js"></script>
    <script src="flexible.debug.js"></script>
    <script src="jquery-1.11.1.min.js"></script>
</head>
<body>

    <div class="divider1">金额输入框 - 强调</div>
    <div class="divider2"></div>
    <div class="list">
        <span class="title">转账金额</span>
        <img class="sign" src="RMB.png">
        <input id="currency" class="currency" type="text" value="" placeholder="免手续费&nbsp;实时汇出" maxlength="12" required onclick="back()" onblur="call()">
        <a class="icon" href="#"></a>
        <div class="divider"></div>
        <span class="description">如需延迟汇出，请<a href="#">点此办理</a></span>
    </div>
    <div class="divider2"></div>

    <script type="text/javascript">
        
        //格式化
        function fmoney(s, n) {
            n = n > 0 && n <= 20 ? n : 2;
            s = parseFloat((s + "").replace(/[^\d\.-]/g, "")).toFixed(n) + "";
            var l = s.split(".")[0].split("").reverse(), r = s.split(".")[1];
            t = "";
            for (i = 0; i < l.length; i++) {
                t += l[i] + ((i + 1) % 3 == 0 && (i + 1) != l.length ? "," : "");
            }
            return t.split("").reverse().join("") + "." + r;
        }

        //去格式化
        function rmoney(s) {
            return parseFloat(s.replace(/[^\d\.-]/g, ""));
        }

        function call() {
            var value = document.getElementById("currency");
            if (value.value != ""){
                value.value = fmoney(value.value,2);
            }
        }

        function back() {
            var value = document.getElementById("currency");
            if (value.value != ""){
                value.value = rmoney(value.value);
            }
        }

    </script>

</body>
</html>